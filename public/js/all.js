var commonModule=function(){var e="http://dn7store.app/datatable/",t="/select2/",a=function(){var e=1e3;window.setTimeout(function(){window.location.href="/logout"},e)};return{autoLogOut:a,datatableBaseURL:e,select2BaseURL:t}}(),itemModule=function(e){var t=e.datatableBaseURL+"items",a=e.select2BaseURL+"items",n=null,o=function(){l(),c(),r()},r=function(){$("input.number").each(function(){var e=$(this).data("input");$(this).autoNumeric("init",{aSep:",",aDec:".",aSign:"Rp ",mDec:"0"}),$(this).on("change keyup",function(){var t=$(this).val().replace("Rp ","");$("input[name='"+e+"']").val(t)})})},i=function(){$("select.item_ajax").select2({minimumInputLength:2,placeholder:"Search existing item",ajax:{url:a,dataType:"json",type:"POST",data:function(e){var t={term:e.term};return t},processResults:function(e){return{results:$.map(e,function(e){return{text:e.model,id:e.model}})}}}})},c=function(){$("#switch_model").on("click",function(){var e=$("#model_input"),t=$(this);null==n&&(n=$("input#model").val()),'<i class="fa fa-search fa-fw"></i> Search'==t.html()?(e.html('<select name="model" class="item_ajax form-control"></select>'),i(),t.html('<i class="fa fa-keyboard-o fa-fw"></i> Type')):(e.html('<input type="text" id="model" placeholder="Enter your new item" class="form-control" value="'+n+'" name="model">'),t.html('<i class="fa fa-search fa-fw"></i> Search'))})},l=function(){$("#datatable tfoot th").each(function(){var e=$(this).text();""!=e&&$(this).html('<input type="text" class="form-control" placeholder="Search '+e+'" style="width: 100%;" />'),"Created Date"!=e&&"Updated Date"!=e||$(this).html('<input type="text" class="datepicker form-control" placeholder="Search '+e+'" style="width: 100%;" />')});var e=$("#datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:t,type:"POST"},language:{decimal:",",thousands:"."},columns:[{data:"model",name:"items.model"},{data:"size",name:"items.size"},{data:"color",name:"items.color"},{data:"stok",name:"items.stok"},{data:"normal_price",name:"items.normal_price"},{data:"reseller_price",name:"items.reseller_price"},{data:"action",name:"action",orderable:!1,searchable:!1}]});e.columns().every(function(){var e=this;$("input",this.footer()).on("keyup change",function(){var t=this.value;"Search Model"!=this.placeholder&&"Search Brand"!=this.placeholder||(t=t.toUpperCase()),e.search()!==t&&e.search(t).draw()})})};return{init:o}}(commonModule),transactionModule=function(e){var t=e.datatableBaseURL+"transactions",a=e.select2BaseURL+"items",n=function(){u(),l(),s(),c(),o(),d()},o=function(){$("form").on("focus","input[type=number]",function(e){$(this).on("mousewheel.disableScroll",function(e){e.preventDefault()})}),$("form").on("blur","input[type=number]",function(e){$(this).off("mousewheel.disableScroll")})},r=function(){var e=$("table#item_table"),t=$("#new_row").find("tbody"),a=t.clone();a.find("select").addClass("product_ajax"),a=a.html(),e.find("tbody").append(a),s()},i=function(e){e.closest("tr").remove()},c=function(){},l=function(){$(".datepicker").datepicker({weekStart:1,todayHighlight:!0,clearBtn:!0,format:"yyyy-mm-dd",autoclose:!0})},s=function(){$("select.product_ajax").select2({minimumInputLength:2,ajax:{url:a,dataType:"json",type:"POST",data:function(e){var t=$("#item_id option:selected").val(),a={term:e.term,item_id:t};return a},processResults:function(e){return{results:$.map(e,function(e){return{text:e.model+" - "+e.size+" "+e.color,id:e.id}})}}}})},u=function(){$("#datatable tfoot th").each(function(){var e=$(this).text();""!==e&&$(this).html('<input type="text" class="form-control" placeholder="Search '+e+'" style="width: 100%;" />'),"Created at"==e&&$(this).html('<input type="text" class="datepicker form-control" placeholder="Search '+e+'" style="width: 100%;" />')});var e=$("#datatable").DataTable({processing:!0,serverSide:!0,ajax:{url:t,type:"POST"},language:{decimal:",",thousands:"."},columns:[{data:"check",name:"check",orderable:!1,searchable:!1},{data:"name",name:"name"},{data:"address",name:"address"},{data:"source",name:"source"},{data:"total",name:"total"},{data:"created_at",name:"created_at"},{data:"action",name:"action",orderable:!1,searchable:!1}]});e.columns().every(function(){var e=this;$("input",this.footer()).on("keyup change",function(){var t=this.value;"Search Code"!=this.placeholder&&"Search Supplier"!=this.placeholder||(t=t.toUpperCase()),"Search Status"==this.placeholder&&(t=t.replace(" ","_").toLowerCase()),e.search()!==t&&e.search(t).draw()})})},d=function(){$("button#printTransaction").on("click",function(){var e=$('form#print input[name="selected_transactions[]"]').serialize();window.location="/transaction/print?"+e})};return{init:n,addItem:r,removeItem:i}}(commonModule);